(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))r(t);new MutationObserver(t=>{for(const s of t)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function o(t){const s={};return t.integrity&&(s.integrity=t.integrity),t.referrerpolicy&&(s.referrerPolicy=t.referrerpolicy),t.crossorigin==="use-credentials"?s.credentials="include":t.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(t){if(t.ep)return;t.ep=!0;const s=o(t);fetch(t.href,s)}})();class T{#t;#e;constructor(e){this.#t=e,this.#e=0}addPlayedTime(e){this.#e=this.#e+e}getPlayedTime(){return this.#e}getPlayerName(){return this.#t}}async function w(n){return await(await fetch(n)).json()}async function L(n,e){const o={method:"POST",headers:{"Content-Type":"application/json; charset=UTF-8"},body:JSON.stringify({answer:n})};return await fetch(e,o)}const P="https://courselab.lnu.se/quiz/question/1";let a;const _=document.getElementById("question"),k=document.getElementById("start-button"),l=document.getElementById("submit"),u=document.getElementById("quiz"),m=document.getElementById("registration-box"),E=document.getElementById("winning-box"),N=document.getElementById("nickName"),p=document.getElementById("results_box"),y=document.getElementById("errors"),O=document.getElementById("restart_in_error_box"),R=document.getElementById("restart_in_results_box"),S=document.getElementById("results_in_winning_box"),q=document.getElementById("results_in_error_box");k.addEventListener("click",()=>{u.classList.remove("hidden"),m.classList.add("hidden"),U()});l.addEventListener("click",()=>{const n=G();a.addPlayedTime(n),c(),x(10)});O.addEventListener("click",()=>{a=null,location.reload(),y.classList.add("hidden"),m.classList.remove("hidden")});R.addEventListener("click",()=>{a=null,location.reload(),p.classList.add("hidden"),m.classList.remove("hidden")});S.addEventListener("click",()=>{E.classList.add("hidden"),p.classList.remove("hidden"),v()});q.addEventListener("click",()=>{y.classList.add("hidden"),p.classList.remove("hidden"),v()});function U(){a=new T(N.value),x(10),f(P)}async function f(n){const e=await w(n);_.innerHTML=e.question,Object.prototype.hasOwnProperty.call(e,"alternatives")?A(e):j(e)}function j(n){const e=document.createElement("input");e.classList.add("input");const o=document.getElementById("submit"),r=o.parentNode;e.setAttribute("type","text"),e.setAttribute("id","answer"),e.setAttribute("name","answer"),r.insertBefore(e,o),l.addEventListener("click",async function(){const t=await L(e.value,n.nextURL),s=await t.json();t.status===400?g():!Object.prototype.hasOwnProperty.call(s,"nextURL")&&t.status===200&&B(),f(s.nextURL),e.remove()},{once:!0})}function A(n){const e=n.alternatives,o=document.createElement("form");o.classList.add("form");const r=document.getElementById("submit");r.parentNode.insertBefore(o,r);for(const s in e)C(o,s,e[s]);l.addEventListener("click",async function(){const s=o.querySelector('input[name="buttonsGroup"]:checked'),i=await L(s.value,n.nextURL),h=await i.json();i.status===400?g():!Object.prototype.hasOwnProperty.call(h,"nextURL")&&i.status===200&&B(),f(h.nextURL),o.remove()},{once:!0})}function C(n,e,o){const r=document.createElement("input");r.type="radio",r.name="buttonsGroup",r.value=e;const t=document.createElement("label");t.appendChild(r),t.appendChild(document.createTextNode(o)),n.appendChild(t)}function B(){u.classList.add("hidden"),c();const n=document.getElementById("player_result");n.innerHTML="Your result is: "+a.getPlayedTime()+" seconds",E.classList.remove("hidden"),sessionStorage.setItem(a.getPlayerName(),a.getPlayedTime())}function g(){c(),u.classList.add("hidden"),y.classList.remove("hidden")}function v(){for(let n=1;n<sessionStorage.length;n++){const e=sessionStorage.key(n),o=sessionStorage.getItem(e),r=document.createElement("LI"),t=document.createTextNode("{Nickname: "+e+"; Seconds: "+o+"}");r.appendChild(t),document.getElementById("data").appendChild(r)}}let b,I,d;function x(n){d=n,b=setInterval(function(){d<=0&&(c(),g()),document.getElementById("seconds").innerHTML=d+"s",d-=1,I=n-d},1e3)}function c(){clearInterval(b)}function G(){return I}
